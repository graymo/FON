---
layout: default
title: home
---
  <h2>The 2015 Season Has Begun</h2>
  
  <p>Festival of Neighbourhoods invites you to create opportunities to connect with your neighbours - plan a simple gathering or activities, start a neighbourhood project, or work with others to host events in your neighbourhoods that bring people together. These activities can grow into family, neighbourhood, and community traditions, just like Festival of Neighbourhoods has become part of the tradition and strength of our community!</p>

  <p>Deadline to register your activities for this season is October 5th 2015. All activities held beween October 1, 2014 and September 30, 2015 can be eligible for prizes and awards.</p>
  <div id="map" style="height: 650px"></div>
  
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <script src = "http://leaflet.github.io/Leaflet.markercluster/dist/leaflet.markercluster-src.js"></script>
  
  <script>
    var map = L.map('map').setView([43.43,-80.46], 12);
      L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
        '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
      id: 'examples.map-i875mjb7'
    }).addTo(map);
    
    function getColor(w) {
			return w == 10 ? '#ffffb3' :
			       w == 9  ? '#bebada' :
			       w == 8  ? '#fb8072' :
			       w == 7  ? '#80b1d3' :
			       w == 6  ? '#fdb462' :
			       w == 5  ? '#b3de69' :
			       w == 4  ? '#fccde5' :
			       w == 3  ? '#d9d9d9' :
			       w == 2  ? '#bc80bd' :
			       w == 1  ? '#8dd3c7' :
			                 '#ccebc5' ;
		}
		
		function style(feature) {
			return {
				weight: 2,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 0.7,
				fillColor: getColor(feature.properties.WardNumber)
			};
		}
		
    function onEachFeature(feature, layer) {
      if (feature.properties && feature.properties.popupContent) {
        layer.bindPopup(feature.properties.popupContent)
      }
      else if (feature.properties && feature.properties.WardName) {
      	layer.bindPopup(feature.properties.WardName)
      }
    }
    
    var registeredActivities = {{site.data.registered|jsonify}};
    var unregisteredActivities = {{site.data.unregistered|jsonify}};
    var capitalGrants = {{site.data.capital|jsonify}};
    
    var registered = L.geoJson(registeredActivities, {onEachFeature: onEachFeature});
    var unregistered = L.geoJson(unregisteredActivities, {onEachFeature: onEachFeature});
    var capital = L.geoJson(capitalGrants, {onEachFeature: onEachFeature});
    
    var markers = L.markerClusterGroup(registered, unregistered, capital);
      map.addLayer(markers);
    
    var wardBoundaries = {{site.data.ward-boundaries|jsonify}};
    
    var wards = L.geoJson(wardBoundaries, {
    	onEachFeature: onEachFeature,
      style: style,
    }).addTo(map);
    
    var myIcon = L.divIcon();
    // you can set .my-div-icon styles in CSS

      L.marker([43.43,-80.46], {icon: myIcon}).addTo(map);
    
    var title = L.control({position: 'topright'});
      title.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'titleDiv');
        div.innerHTML += 'City of Kitchener Festival of Neighbourhoods 2015';
        return div
        }
        title.addTo(map);
        
    var baseLayers = {
      "City of Kitchener Wards": wards
    };
    
    var overlays = {
      "Registered Activities": registered,
      "Unregistered Activities": unregistered,
      "Neighbourhood Improvement Capital Grants": capital
    };
    
    L.control.layers(null, overlays, {collapsed: false}).addTo(map);
   
    var legend = L.control({position: 'bottomright'});
    
      legend.onAdd = function (map) {
    
      var div = L.DomUtil.create('div', 'info legend'),
        wards = [1,2,3,4,5,6,7,8,9,10],
        labels = [];
    
      // loop through our density intervals and generate a label with a colored square for each interval
      div.innerHTML = '<b>Wards:</b><br>';
      for (var i = 0; i < wards.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(wards[i]) + '"></i> ' + (wards[i] ? wards[i] + '<br>' : '+');
      }
    
      return div;
      };
    
    legend.addTo(map);
    
  </script>
