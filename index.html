---
layout: default
title: home
---
  <h2>The 2015 Season Has Begun</h2>
  
  <p>Festival of Neighbourhoods invites you to create opportunities to connect with your neighbours - plan a simple gathering or activities, start a neighbourhood project, or work with others to host events in your neighbourhoods that bring people together. These activities can grow into family, neighbourhood, and community traditions, just like Festival of Neighbourhoods has become part of the tradition and strength of our community!</p>

  <p>Deadline to register your activities for this season is October 5th 2015. All activities held beween October 1, 2014 and September 30, 2015 can be eligible for prizes and awards.</p>
  <div id="map" style="height: 650px"></div>
  <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
  <script>
    var map = L.map('map').setView([43.43,-80.475], 12);
    L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
      maxZoom: 18,
      attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
        '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
      id: 'examples.map-i875mjb7'
    }).addTo(map);
    
    function getColor(w) {
			return w == 10 ? '#ffffb3' :
			       w == 9  ? '#bebada' :
			       w == 8  ? '#fb8072' :
			       w == 7  ? '#80b1d3' :
			       w == 6  ? '#fdb462' :
			       w == 5  ? '#b3de69' :
			       w == 4  ? '#fccde5' :
			       w == 3  ? '#d9d9d9' :
			       w == 2  ? '#bc80bd' :
			       w == 1  ? '#8dd3c7' :
			                 '#ccebc5' ;
		}
		
		function style(feature) {
			return {
				weight: 2,
				opacity: 1,
				color: 'white',
				dashArray: '3',
				fillOpacity: 0.7,
				fillColor: getColor(feature.properties.WardNumber)
			};
		}
		
		var geojson;
		
    function onEachFeature(feature, layer) {
      if (feature.properties && feature.properties.WardName) {
        polygon.getBounds().getCenter();
        layer.bindPopup(feature.properties.WardName);
      	layer.on('mouseover', function (e) {this.openPopup();})
      	layer.on('mouseout', function (e) {this.closePopup();})
      }
      else if (feature.properties && feature.properties.Quote) {
        layer.bindPopup('<b>Activity: </b>' + feature.properties.Activity + '<br><b>Location: </b>' + feature.properties.Location + '<br><b>Date: </b>' + '<br><br><i>"' + feature.properties.Quote + '"</i>')}
      else if (feature.properties && feature.properties.description) {
        layer.bindPopup(feature.properties.description)}
        else {layer.bindPopup(feature.properties.Activity)
      }
    }
    
    var fonFeatures = {{site.data.registered-activities|jsonify}};
    var unregistered = {{site.data.unregistered-activities|jsonify}};
    var awards = {{site.data.capital-grants|jsonify}};
    
    var events = L.geoJson(fonFeatures, {onEachFeature: onEachFeature});
    var other = L.geoJson(unregistered, {onEachFeature: onEachFeature});
    var grants = L.geoJson(awards, {onEachFeature: onEachFeature});
    
    
    
    var wards = {{site.data.ward-boundaries|jsonify}};
    
    geojson = L.geoJson(wards, {
    	style: style,
    	onEachFeature: onEachFeature
    }).addTo(map);
    
    var overlays = {
      "Registered FON Events": events,
      "Other Events": other,
      "Neighbourhood Improvement Grants": grants
    };
    
    var legend = L.control({position: 'bottomright'});

legend.onAdd = function (map) {

    var div = L.DomUtil.create('div', 'info legend'),
        grades = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],
        labels = [];

    // loop through our density intervals and generate a label with a colored square for each interval
    for (var i = 0; i < grades.length; i++) {
        div.innerHTML +=
            '<i style="background:' + getColor(grades[i]) + '"></i> ' +
            grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
    }

    return div;
};

legend.addTo(map);
    L.control.layers(overlays).addTo(map);
  
  </script>
